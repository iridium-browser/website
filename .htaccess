---
---
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^download.html$ /downloads/ [R=301,L]
RewriteRule ^downloads.html$ /downloads/ [R=301,L]
RewriteRule ^download(/|$) /downloads/ [R=301,L]

Redirect 301 suse.html$ {{ site.url }}/downloads/opensuse.html

RewriteRule ^index(\\.html)? {{ site.url }} [R=301,C]
RewriteRule ^$ index.html [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html

RewriteCond %{HTTP_USER_AGENT} libwww-perl.* 
RewriteRule .* ? [F,L]

ErrorDocument 401 {{ '401.html' | relative_url }}
ErrorDocument 403 {{ '403.html' | relative_url }}
ErrorDocument 404 {{ '404.html' | relative_url }}
ErrorDocument 500 {{ '500.html' | relative_url }}

Header append Vary User-Agent

AddDefaultCharset UTF-8
AddCharset application/font-woff2 .woff2
AddCharset application/x-font-woff2 .woff2

AddType font/truetype .ttf
AddType font/opentype .otf
AddType application/font-woff .woff
AddType application/font-woff2 .woff2
AddType application/javascript .js
AddType application/json .json
AddType application/pdf .pdf
AddType application/x-apple-diskimage .dmg .smi .img
AddType application/x-font-woff .woff
AddType application/x-font-woff2 .woff2
AddType application/x-msdownload .exe .dll .ocx .com .bat .msi .mso
AddType application/zip .zip .zipx
AddType image/jpeg .jpeg .jpg .jpe .JPG
AddType image/png .png
AddType image/svg+xml .svg .svgz
AddType image/vnd.microsoft.icon .ico
AddType image/x-icon .ico
AddType text/html .html .htm
AddType text/css .css
AddType text/xml .xml
AddType video/mp4 .mp4
AddType video/ogg .ogv
AddType video/webm .webm

<IfModule mod_headers.c>
  Header set Content-Security-Policy "default-src 'self'; base-uri 'self'; script-src 'self'; worker-src 'self'; img-src data: 'self'; style-src 'unsafe-inline' 'self'; connect-src 'self'; object-src 'none';
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-XSS-Protection "1; mode=block"
  Header set X-Content-Type-Options "nosniff"
  Header set X-Download-Options "noopen"
  Header set X-Permitted-Cross-Domain-Policies "none"
  Header set Referrer-Policy "no-referrer"
  Header always set Feature-Policy "microphone 'none'; payment 'none'; sync-xhr 'self' {{ '/' | absolute_url }}"
  Header always set Strict-Transport-Security "max-age=15552000; includeSubDomains; env=HTTPS"
  Header set Connection keep-alive
  SetEnv modHeadersAvailable true
  <FilesMatch "\.(js|css|xml|gz|html)$">
    Header append Vary: Accept-Encoding
  </FilesMatch>
  <FilesMatch "\.(eot|svg|ttf|woff|woff2)$">
    Header set Cache-Control "max-age=2628000"
  </FilesMatch>
</IfModule>

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 600 seconds"

  ExpiresByType image/icon						"access plus 2 month"
  ExpiresByType image/jpg						"access plus 2 month"
  ExpiresByType image/jpeg						"access plus 2 month"
  ExpiresByType image/png						"access plus 2 month"
  ExpiresByType image/svg+xml					"access plus 2 month"
  ExpiresByType image/x-icon					"access plus 2 month"
  ExpiresByType font/eot						"access plus 1 year"
  ExpiresByType font/opentype					"access plus 1 year"
  ExpiresByType font/otf						"access plus 1 year"
  ExpiresByType font/truetype					"access plus 1 year"
  ExpiresByType font/woff						"access plus 1 year"
  ExpiresByType font/woff2						"access plus 1 year"
  ExpiresByType application/font-woff			"access plus 1 year"
  ExpiresByType application/font-woff2			"access plus 1 year"
  ExpiresByType application/ico					"access plus 1 year"
  ExpiresByType application/javascript			"access plus 2 month"
  ExpiresByType application/vnd.ms-fontobject	"access plus 1 year"
  ExpiresByType application/x-font-woff			"access plus 1 year"
  ExpiresByType application/x-font-woff2		"access plus 1 year"
  ExpiresByType application/x-ico				"access plus 1 year"
  ExpiresByType application/x-javascript 		"access plus 2 month"
  ExpiresByType text/javascript					"access plus 2 month"
  ExpiresByType video/mp4 						"access plus 2 month"
  ExpiresByType video/ogg 						"access plus 2 month"
  ExpiresByType video/webm 						"access plus 2 month"
</IfModule>
<FilesMatch "\.(css|htm|html|json)$">
	<IfModule mod_expires.c>
		ExpiresActive Off
	</IfModule>
	<IfModule mod_headers.c>
		FileETag None
		Header unset ETag
		Header unset Pragma
		Header unset Cache-Control
		Header unset Last-Modified
		Header set Pragma "no-cache"
		Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
		Header set Expires "Mon, 10 Apr 1972 00:00:00 GMT"
	</IfModule>
</FilesMatch>

<IfModule mod_deflate.c>
  # compress text, html, javascript, css, xml:
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/json
  AddOutputFilterByType DEFLATE application/ld+json
  AddOutputFilterByType DEFLATE application/manifest+json
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-font-woff
  AddOutputFilterByType DEFLATE application/x-font-woff2
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/x-web-app-manifest+json
  AddOutputFilterByType DEFLATE font/eot
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE font/woff
  AddOutputFilterByType DEFLATE font/woff2
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/cache-manifest
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml
</IfModule>